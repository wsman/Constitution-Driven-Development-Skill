# 基本法索引 (Basic Law Index) - [项目名称] 宪法核心公理

**版本**: v6.0.0 (控制论架构正式版，与OpenDoge系统对齐)
**状态**: [🟢 引导模式 | 🟡 维护模式 | 🔴 重构模式]
**项目**: [项目名称]
**最后更新**: [YYYY-MM-DD]
**维护者**: [项目维护者]
**宪法依据**: §101§102§103§148
**说明**: [项目名称]的基本法宪法核心（T0层），采用§100-§199

*注：本文件基于OpenDoge基本法 v6.0.0 (2026-02-20) 适配为CDD技能模板，与操作法和工具法共同构成完整的三层法律体系。保留模板变量 [项目名称] 供具体项目使用。*
## 法律层级体系

CDD采用三级法律架构，遵循 **宪法至上原则**：

### 🏛️ 基本法 (宪法核心) §100-§199
**性质**：核心公理、基本原则  
**示例**：§100.3（宪法同步）、§103（单一真理源）、§106.1（孢子协议）
**约束力**：最高，所有其他法律必须遵守基本法

### ⚙️ 操作法 §200-§299  
**性质**：程序规范、工作流公理、系统治理  
**示例**：§201（五状态工作流）、§230（异构模型策略）、§267-§269（控制论架构治理）
**约束力**：中等，在基本法框架内规定操作程序

### 🔧 工具法 §300-§399
**性质**：工具使用宪法、AI增强开发原则、CDD工作流工具标准  
**示例**：§301（工具驱动原则）、§312-§319（AI辅助开发工具原则）、§321（CDD五状态工作流工具标准）
**约束力**：具体，规定工具使用和开发工作流

### ⚖️ 法律冲突解决原则
1. **宪法至上**：基本法优先于操作法和工具法
2. **新法优于旧法**：同一层级中，后制定的法律优先
3. **特别法优于一般法**：针对特定领域的条款优先于一般条款
4. **法律保留**：只有基本法可限制公民（开发者）基本权利

### 📝 法律引用规范
- **基本法**：引用为"宪法§xxx"（如宪法§106.1）
- **操作法**：引用为"操作法§xxx"（如操作法§201）
- **工具法**：引用为"工具法§xxx"（如工具法§301）
- **标准**：引用为"DS-xxx"（如DS-050）
- **工作流**：引用为"WF-xxx"（如WF-201）

**注意**：§106.1


---

## 核心公理 (必须熟记)

| 条款 | 公理 | 核心原则 |
|------|------|----------|
| **§100.3** | 宪法同步公理 | 版本变更必须触发全体系同步扫描与强制对齐 |
| **§101** | 双存储同构公理 | 内存状态必须与文件系统状态一致 ($S_{runtime} \equiv S_{disk}$) |
| **§102** | 熵减验证 | 重构必须满足语义保持性 ($S' = S$) 和熵减验证 ($H' \leq H$) |
| **§103** | 单一真理源公理 | `memory_bank` 是可执行规范的单一真理源，引用而非复制 |
| **§104** | activeContext单一存储公理 | 活动上下文必须存储在单一位置 |
| **§105** | 类型公理优先 | 类型定义先于代码实现 ($T_{define} \rightarrow T_{implement}$) |
| **§106.1** | 孢子协议 | 防止工具链对自己进行操作（递归污染），实现智能隔离 |
| **§107** | 安全公理 | 检查依赖包存在性，使用参数化查询防御注入 |
| **§148** | 控制论架构公理 | 系统采用三层协同控制论架构（治理层、控制层、执行层），建立观测、控制、记忆三大回路 |
| **§150** | 编号释放原则 | 法律条文完成迁移后，原始编号应当释放，可用于未来扩展或标注为已释放状态 |

---

## §148

> **宪法地位**: 宪法核心原则
> **核心要点**: [项目名称]系统必须采用三层协同控制论架构（治理层、控制层、执行层），建立观测回路、控制回路、记忆回路三大控制循环，实现治理与执行的清晰分离与高效协同。
> **[项目名称]实施**: 
> 1. **治理层 (T0宪法层)**: §148§267-§269
> 2. **控制层 (T1公理层)**: 熵值计算、协同策略、长时间任务执行公理
> 3. **执行层 (T2协议层)**: §350-§359
> **详细实施**: 参见 `knowledge_graph.md` 控制论架构集成章节和 [项目技术文档路径]

### 三大控制回路

| 回路 | 功能 | 宪法基础 | [项目名称]实施 |
|------|------|----------|----------------|
| **观测回路** | 实时状态同步、熵值监测 | §101§102§263-§266
| **控制回路** | 控制决策、资源控制 | §267-§269§201-§204§230-§249
| **记忆回路** | 记忆存储、知识结晶 | §151§601-§609

### 控制论架构合规审计要求
**基于§269
1. **观测回路冗余验证**: 关键观测数据必须有冗余备份和验证机制
2. **控制回路降级验证**: 控制系统必须有优雅降级策略，确保基本功能可用
3. **记忆回路分阶段验证**: 记忆系统采用分阶段实施策略，优先确保核心记忆完整性

---

## §150

> **宪法地位**: 宪法核心原则
> **核心要点**: 法律条文完成迁移后，原始编号应当释放，不再占用原文件区段。释放的编号可用于未来扩展或标注为已释放状态。
> **实施规则**:
> 1. 当T0宪法条文迁移到T1公理层时，原条文编号释放
> 2. 当T1公理条文在文件间迁移时，原条文编号释放
> 3. 释放编号可重新分配给新内容，或标注为"已释放编号"
> 4. 所有编号释放操作必须记录迁移历史
> **[项目名称]实施**: [描述项目编号释放管理方式]

---

## 引导模式 (Bootloader Mode)

**定义**: 基于索引和图谱的轻量级认知模式，强调"信任架构，而非内容"。适用于[项目类型]项目的认知范式。

### 核心原则
1. **信任索引**: 内存中仅加载内核，具体知识按需加载
2. **图谱优先**: 复杂问题优先使用知识图谱导航
3. **架构驱动**: 代码实现遵循架构约束，而非临时决策
4. **[项目类型]适配**: 针对[项目业务领域]特性进行认知优化

### [项目名称]工作流程
```
[项目输入分析] → [领域图谱定位] → [标准索引检索] → [受控执行] → [熵减验证]
```

### 项目特定配置
- **核心索引**: `memory_bank/t0_core/` 目录下的5个索引文件 (本文件、knowledge_graph.md、operational_law_index.md、tools_law_index.md、active_context.md)
- **领域图谱**: `memory_bank/t0_core/knowledge_graph.md`
- **活动上下文**: `memory_bank/t0_core/active_context.md`
- **[项目名称]特定知识**: [描述项目特定知识结构，如技术栈、业务规则、数据模型等]

---

## 三级验证协议 (§108)

**验证周期**: [每日 | 每次提交 | 每次部署]  
**验证工具**: [项目验证工具名称]  
**失败处理**: 遵循 WF-206 三位一体收敛协议

| Tier | 验证内容 | 数学公理 | [项目名称]具体实施 | 验证工具 |
|------|----------|----------|-------------------|----------|
| **Tier 1** | 物理文件系统 vs ASCII树 | $S_{fs} \cong S_{doc}$ | [描述项目文件结构验证方法] | `[项目T1验证脚本]` |
| **Tier 2** | 代码AST签名 vs 接口定义 | $I_{code} \supseteq I_{doc}$ | [描述项目接口覆盖验证方法] | `[项目T2验证脚本]` |
| **Tier 3** | 运行时行为 vs 行为断言 | $B_{code} \equiv B_{spec}$ | [描述项目行为断言验证方法] | `[项目T3验证脚本]` |

### 验证执行命令
```bash
# Tier 1: 结构验证
python [项目T1验证脚本].py --format json

# Tier 2: 签名验证  
python [项目T2验证脚本].py --check-interfaces

# Tier 3: 行为验证
pytest [项目测试目录]/ --cov=[项目模块]
```

### 验证结果处理
1. **Tier 1 失败**: 修复文件结构，更新 `memory_bank/` 文档
2. **Tier 2 失败**: 补充接口定义，更新操作法技术标准
3. **Tier 3 失败**: 修正代码实现，添加/更新测试用例

### 项目特定验证扩展
- **[项目特性1]验证**: [描述扩展验证方法]
- **[项目特性2]验证**: [描述扩展验证方法]
- **[合规性验证]**: [描述项目合规性检查]

---

## 懒加载操作

**优化原则**: 针对[项目类型]项目的知识访问模式进行优化，减少上下文切换成本。

当需要具体执行[项目名称]的某一任务时：

### 1. 检索阶段
- **标准索引检索**: 在 `memory_bank/core/` 中查找相关条款
- **[项目特定]检索**: [描述项目特定检索关键词和模式]
- **图谱辅助检索**: 复杂问题使用 `memory_bank/core/knowledge_graph.md` 导航

### 2. 加载阶段
- **文件选择**: 根据索引结果读取具体的 DS-xxx 或 WF-xxx 文件
- **上下文注入**: 将必要的前置条件加载到工作内存
- **[项目领域]知识加载**: [描述项目特定知识加载策略]

### 3. 执行阶段
- **标准遵循**: 按照DS标准或WF工作流实现
- **[项目工具]使用**: [描述项目特定工具和命令]
- **原子操作**: 确保操作满足 §104

### 4. 释放阶段
- **上下文清理**: 任务完成后立即释放占用的token
- **状态保存**: 如有必要，更新 `activeContext.md`
- **知识归档**: [描述项目特定知识归档策略]

### 项目特定优化
- **[高频操作]缓存**: [描述高频操作的缓存策略]
- **[复杂查询]预加载**: [描述复杂查询的预加载机制]
- **[敏感数据]处理**: [描述敏感数据的懒加载保护]

---

## 性能指标

**监控频率**: [实时 | 每日 | 每次提交]  
**告警阈值**: 根据[项目SLA]设定  
**优化目标**: 持续降低系统熵值 $H_{sys}$

| 指标 | CDD通用目标 | [项目名称]特定目标 | 监控工具 |
|------|-------------|-------------------|----------|
| **上下文占用** | <8K tokens | [项目上下文限制，如 <10K tokens] | `[项目监控脚本]` |
| **检索速度** | O(1) 索引查找，<100ms | [项目检索性能目标，如 <50ms] | `[项目性能监控]` |
| **熵减验证** | $\Delta H > 0$ | [项目熵值优化目标，如 $H_{sys} < 0.5$] | `measure_entropy.py` |
| **架构同构性** | 100% | [项目架构一致性目标，如 >95%] | `[项目架构验证]` |
| **[项目特性1]性能** | - | [描述项目特定性能指标1] | `[项目工具1]` |
| **[项目特性2]性能** | - | [描述项目特定性能指标2] | `[项目工具2]` |
| **[服务质量]指标** | - | [描述项目服务质量指标] | `[项目监控工具]` |

### 性能优化策略
1. **索引优化**: 针对[项目查询模式]优化索引结构
2. **缓存策略**: 基于[项目访问频率]实施智能缓存
3. **懒加载优化**: 根据[项目工作流]调整懒加载粒度
4. **熵值监控**: 设置[项目阈值]的熵值告警机制

### 性能基准测试
```bash
# 上下文占用测试
python [项目上下文测试].py --measure-tokens

# 检索性能测试
python [项目检索测试].py --benchmark

# 熵值计算
python scripts/measure_entropy.py --format detailed

# [项目特定]性能测试
[项目性能测试命令]
```

### 性能告警处理
1. **上下文超限**: 启动内存优化，清理无用上下文
2. **检索超时**: 优化索引结构，添加缓存
3. **熵值恶化**: 启动 WF-206 重构协议
4. **[项目特性]性能下降**: [描述项目特定处理流程]

---

## 工具使用限制

- ✅ 信任索引，优先使用索引查找
- ✅ 图谱导航，复杂问题使用知识图谱推理
- ✅ 原子操作，所有修改遵循 §104
- ❌ 禁止手动加载完整知识库到内存
- ❌ 禁止凭空捏造 DS 标准
- ❌ 禁止绕过图谱推理进行线性思维决策

---

*遵循宪法约束: 代码即数学证明，架构即宪法约束。*
