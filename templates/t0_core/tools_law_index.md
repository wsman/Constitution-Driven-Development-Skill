# 工具法索引 (Tools Law Index) - [项目名称] 工具使用宪法核心

**版本**: v6.0.0 (CDD技能模板版本，与OpenDoge系统对齐)
**状态**: [🟢 引导模式 | 🟡 维护模式 | 🔴 重构模式]
**项目**: [项目名称]
**最后更新**: [YYYY-MM-DD]
**维护者**: [项目维护者]
**宪法依据**: §101§102§301§312-§319§267-§269
**说明**: [项目名称]的工具使用宪法核心（T0层），采用§300-§399

*注：本文件基于OpenDoge工具法 v6.0.0 适配为CDD技能模板，整合了CDD特有的工作流描述，保留模板变量 [项目名称] 供具体项目使用。*

---

## 📚 文件概述

**本文件是[项目名称]系统的工具使用宪法核心（T0层），采用§300-§399

**精简原则**:
1. **聚焦宪法核心**: 移除详细技术配置到T1公理层
2. **提高信息密度**: 精简冗长技术说明，保留核心原则
3. **统一引用标准**: 建立清晰的T0→T1→T2工具引用关系
4. **整合CDD工作流**: 保留CDD特有的工作流描述和工具使用规范

### 📋 编号范围分配

| 编号范围 | 内容类型 | 条文数量 | 详细实施位置 |
|----------|----------|----------|--------------|
| **§300** | 工具法总纲 | 1条 | 本文件 |
| **§301-§309** | 工具使用基础宪法 | 9条 | 本文件 |
| **§310-§319** | AI增强开发工具原则 | 10条 | 本文件 |
| **§320-§329** | CDD工作流工具标准 | 10条 | 本文件 (从原程序法迁移) |
| **§330-§349** | 预留AI工具扩展 | 20条 | 预留 |
| **§350-§399** | 预留长期扩展 | 50条 | 预留 |

---

## 🔄 工具法结构与引用关系

### T0层工具法定位
- **作用**: 定义工具使用的宪法原则和基础框架
- **范围**: §300-§399
- **目标**: 确保工具使用符合宪法约束，提高开发效率，支持CDD工作流

### T1层详细实施
- **位置**: 工具相关公理已整合到T1公理层相应文件中(§400-§699
- **内容**: 工具配置、使用规范、故障处理等公理
- **引用**: 本文件§310-§319

### T2层工作流协议
- **位置**: `t2_protocols/` 和 `t2_standards/` 中的工具标准
- **内容**: 工具使用工作流、最佳实践、配置模板
- **示例**: `WF-201_cdd_workflow.md`、`DS-050_feature_specification.md`

### 三层引用关系
```
T0 工具宪法 (本文件) → T1 工具公理 (behavior_patterns.md) → T2 工具标准 (t2_*/)
```

---

## ⚖️ 第一章：工具使用基础宪法（§301-§309）

### §301
> **宪法地位**: 宪法核心原则
> **核心要点**: 项目由宪法和工具双轮驱动，优先级：现有工具 > 可复用新工具 > 一次性方案。
> **[项目名称]实施**: [描述项目工具驱动策略和优先级规则]
> **详细实施**: 参见T1公理层相关工具驱动公理

### §302
> **宪法地位**: 项目宪法原则
> **核心要点**: [项目核心工具] > [系统工具] > [可复用新工具]。
> **[项目名称]实施**: [描述项目工具库优先级顺序]
> **详细实施**: 参见T1公理层相关优先级规则公理

### §303
> **宪法地位**: 项目宪法原则
> **核心要点**: 需求分析 → 工具搜索 → 适配评估 → 新工具决策 → 实施验证 → 文档记录。
> **[项目名称]实施**: [描述项目工具复用验证流程]
> **详细实施**: 参见T1公理层相关工具复用验证公理

### §304
> **宪法地位**: 项目宪法原则
> **核心要点**: 客户端应用必须采用跨平台技术栈，确保"一次编写，处处运行"。
> **[项目名称]实施**: [描述项目跨平台兼容性要求]
> **详细实施**: 参见T1公理层相关兼容性公理

### §305
> **宪法地位**: 项目宪法原则
> **核心要点**: 开发容器必须支持源码热重载，确保"修改即生效"的开发体验。
> **[项目名称]实施**: [描述项目容器热重载配置]
> **详细实施**: 参见T1公理层相关容器开发公理

### §306
> **宪法地位**: 项目特有内容
> **核心要点**: 安全操作可自由执行，离开本机的操作需谨慎，不确定后果需先询问。
> **[项目名称]实施**: [描述项目外部通信安全约束]
> **详细实施**: 参见T1公理层相关安全通信公理

### §307
> **宪法地位**: 项目特有内容
> **核心要点**: search_files → list_code_definition_names → 综合分析。
> **[项目名称]实施**: [描述项目信息查询流程和工具]
> **详细实施**: 参见T1公理层§552

### §308
> **宪法地位**: 项目特有内容
> **核心要点**: 标准化文件编辑、信息查询、命令执行流程。
> **[项目名称]实施**: [描述项目工具链标准化流程]
> **详细实施**: 参见T1公理层§555

### §309
> **宪法地位**: 项目特有内容
> **核心要点**: 技术限制下允许载体激活，需强身份覆盖、绝对路径锁定、完整验证。
> **[项目名称]实施**: [描述项目防御性工具使用策略]
> **详细实施**: 参见T1公理层§554-§559

---

## 🤖 第二章：AI增强开发工具原则（§310-§319）

### §310
> **宪法地位**: 项目特有内容
> **核心要点**: AI模型作为Tier 1备选模型，在主要模型配额不足时启用。
> **[项目名称]实施**: [描述项目AI模型集成策略和备用方案]
> **详细实施**: 参见相关集成指南和T1公理层相关集成公理

### §311
> **宪法地位**: 项目特有内容
> **核心要点**: 模型配置必须遵循统一标准，显式声明上下文窗口、最大输出、成本等信息。
> **[项目名称]实施**: [描述项目模型配置标准]
> **详细实施**: 参见相关配置标准和T1公理层相关配置标准公理

### §312
> **宪法地位**: 项目宪法原则
> **核心要点**: AI辅助开发工具作为[项目名称]系统核心开发工具，必须与宪法体系深度集成，成为宪法意志的技术延伸。
> **[项目名称]实施**: 
> 1. **配置集成**: 使用[项目专用配置模板]
> 2. **宪法约束**: 必须遵守§101-§315
> 3. **文档引用**: 完整指南位于 [项目AI工具文档路径]
> 4. **安装标准化**: 使用一键安装脚本确保配置一致性
> **详细实施**: 参见相关集成文档

### §313
> **宪法地位**: 项目宪法原则
> **核心要点**: AI工具应优先用于自动化繁琐开发任务，提高开发效率，降低系统熵值($\Delta H_{sys} < 0$)。
> **[项目名称]实施**:
> 1. **任务类型**: 写测试、修复lint错误、解决合并冲突、更新依赖、写发布说明、代码审查
> 2. **工作流封装**: 使用标准化重复工作流
> 3. **自动化Hooks**: 配置自动化检查和格式化
> 4. **CI/CD集成**: 集成到CI/CD流水线，实现宪法合规自动检查
> **详细实施**: 参见相关核心功能文档

### §314
> **宪法地位**: 项目宪法原则
> **核心要点**: 所有AI工具使用必须遵循标准化工作流，确保开发过程的一致性和可重复性。
> **[项目名称]实施**:
> 1. **CDD工作流集成**: 必须支持State A-E五状态宪法驱动开发工作流
> 2. **Bug修复标准**: 复现问题 → 分析根因 → 建议修复 → 应用修复 → 验证结果
> 3. **功能开发标准**: 需求分析 → 方案设计 → 实施开发 → 测试验证 → 文档更新
> 4. **代码审查标准**: 宪法合规检查 → 代码质量检查 → 主题合规检查 → 安全审计
> **详细实施**: 参见相关快速启动指南

### §315
> **宪法地位**: 项目宪法原则
> **核心要点**: AI工具必须支持多Agent协作模式，遵循宪法规定的权限边界和记忆管理原则。
> **[项目名称]实施**:
> 1. **子代理系统**: 使用Subagents隔离复杂任务
> 2. **权限边界**: 每个子代理必须有明确的工具权限和文件访问边界
> 3. **记忆管理**: 子代理必须有独立记忆空间，主会话保持全局记忆统一
> 4. **协调机制**: 主代理负责任务分发和结果整合，子代理专注执行
> **详细实施**: 参见相关多Agent协作文档

### §316
> **宪法地位**: 项目宪法原则
> **核心要点**: AI工具必须深度集成到[项目名称]系统架构中，实现与宪法体系、部门系统、开发工作流的无缝连接。
> **[项目名称]实施**:
> 1. **宪法集成**: 必须引用§101-§315
> 2. **部门集成**: 必须建立清晰的权限边界配置
> 3. **工作流集成**: 必须集成到CDD工作流中，支持State A-E全流程自动化
> 4. **工具链集成**: 必须与现有工具链协同工作，避免重复建设和技术债务
> **详细实施**: 参见相关集成概览文档

### §317
> **宪法地位**: 项目宪法原则
> **核心要点**: AI工具使用必须实施多层次安全防护，保护宪法文件、部门边界和系统机密。
> **[项目名称]实施**:
> 1. **宪法文件保护**: 阻止修改核心宪法文件
> 2. **权限边界控制**: 实施部门隔离，配置文件保护脚本
> 3. **审计追踪**: 所有AI工具操作必须记录审计日志
> 4. **备份恢复**: 关键配置必须有备份和紧急恢复机制
> **详细实施**: 参见相关权限配置文档

### §318
> **宪法地位**: 项目宪法原则
> **核心要点**: AI工具使用必须优化性能，确保高效的开发体验和资源利用，降低Token消耗成本。
> **[项目名称]实施**:
> 1. **上下文管理**: 适时压缩会话上下文，避免Token浪费
> 2. **模型选择**: 根据任务复杂度选择合适模型
> 3. **批量操作**: 封装重复工作流，减少交互次数
> 4. **网络优化**: 配置合理的超时和重试策略
> **详细实施**: 参见相关性能优化指南

### §319
> **宪法地位**: 项目宪法原则
> **核心要点**: AI工具必须与[项目名称]系统中的其他工具协同工作，形成统一的智能开发环境。
> **[项目名称]实施**:
> 1. **工具链协同**: 与现有工具形成互补工具链
> 2. **数据共享**: 通过标准化接口共享开发上下文
> 3. **工作流衔接**: 不同工具在开发工作流中担任不同角色
> 4. **宪法统一**: 所有工具必须遵守相同的宪法约束
> **详细实施**: 参见T1公理层相关章节和工具专用指南

### §320
> **宪法地位**: 项目宪法原则
> **核心要点**: 复杂度等级L2及以上的开发项目必须遵循标准化操作流程(SOP)，确保开发过程的宪法合规性、技术标准化和可追溯性。
> 
> **SOP三阶段框架**:
> 1. **任务规划阶段**: 明确任务目标、评估Token预算、检查现有会话
> 2. **会话执行阶段**: 单一长会话原则、上下文继承、实时记录
> 3. **任务完成阶段**: 会话归档、报告提交、验证合规
> 
> **[项目名称]增强要求**:
> 1. **技术资产库搜索**: 规划前必须搜索现有解决方案
> 2. **CDD合规评估**: 任务必须通过宪法合规分析（§101、§102、§320）
> 3. **熵值影响预估**: 预估开发对系统熵值的影响 ($\Delta H_{sys} \le 0$)
> 4. **零停机部署**: 必须支持§306
> 
> **详细实施**:
> 1. **项目分级标准**: L2+项目指中等复杂度及以上的新功能开发、系统重构、架构调整等任务
> 2. **SOP强制使用**: 开发L2+项目时必须遵循三阶段标准化操作流程
> 3. **合规验证**: 验收时必须验证AI工具使用记录、SOP合规性和宪法合规性
> 4. **例外机制**: 特殊情况下需向[项目负责人]申请豁免，并提供技术限制证据
> 5. **书面记录要求**: 必须遵循§321
> 
> **宪法依据**: §312-§319

### §321
> **宪法地位**: 项目宪法原则
> **核心要点**: 使用AI工具执行L2+项目任务时，必须全程保存可追溯的书面记录，确保开发过程的可验证性和审计追踪能力。
> **[项目名称]实施**:
> 1. **书面记录格式**: 必须使用标准化模板生成书面记录，包含完整的工作日志、决策过程和验证结果
> 2. **提交路径**: 必须提交到 `memory/queues/inbox/[部门]/[项目名]_[任务类型]_[日期].md`
> 3. **内容要求**: 必须包含完整的AI工具使用记录、宪法合规验证、熵值影响评估、技术决策说明
> 4. **时间要求**: 任务完成后24小时内必须提交书面记录，特殊紧急情况需提前说明
> 5. **完整性要求**: 书面记录必须包含可验证的证据链，支持从结果追溯到原始决策
> **宪法依据**: §101§102§320

---

## 🛠️ 第三章：CDD工作流工具标准（§322-§329）

*注：本节从原程序法索引迁移而来，整合CDD工作流描述到工具法框架中*

### §320
> **宪法地位**: 项目宪法原则
> **核心要点**: [项目名称]的CDD工具工作流体系，作为宪法驱动开发的核心执行框架。
> **[项目名称]实施**: [描述项目CDD工作流总体架构]

### §321

**项目适配**: 针对[项目类型]项目的工作流特点进行优化，支持[项目特定输入]和[项目特定输出]。

```
┌────────────────┐     ┌────────────────┐     ┌────────────────┐     ┌────────────────┐     ┌────────────────┐
│   State A      │ ──→ │   State B      │ ──→ │   State C      │ ──→ │   State D      │ ──→ │   State E      │
│  [项目基准摄入] │     │  [项目文档规划] │     │  [项目受控执行] │     │  [项目三级验证] │     │  [项目收敛纠错] │
└────────────────┘     └────────────────┘     └────────────────┘     └────────────────┘     └────────────────┘
```

### State A: [项目基准摄入] (Context Ingestion) 工具标准
**核心动作**: 读取项目的"可执行规范"（单一真理源）  
**[项目名称]工具操作**:
- 加载 `memory_bank/` 中的项目宪法文档
- 读取 `activeContext.md` 获取当前项目状态
- 分析[项目特定输入]确定工作范围
- 建立[项目上下文环境]准备后续工作

**输入**: [项目业务需求] | [用户指令] | [系统事件]  
**输出**: [项目上下文定义] | [工作范围界定] | [初始状态记录]

### State B: [项目文档规划] (Documentation First) 工具标准
**[法定动作 §103]** - 严禁直接修改代码，必须先文档后代码  
**[项目名称]工具操作**:
- 在 `specs/` 目录中创建/更新 T2 规范文档
- 遵循[项目文档模板]确保文档完整性
- 等待用户批准 ([项目批准流程])
- 更新 `activeContext.md` 记录规划状态

**文档要求**:
- [项目特性1]规范: [描述规范要求]
- [项目特性2]规范: [描述规范要求]
- [合规性]文档: [描述合规要求]
- [性能]指标: [描述性能指标定义]

### State C: [项目受控执行] (Safe Implementation) 工具标准
**执行原则**: 依据已批准的 Memory Bank 执行代码修改  
**[项目名称]工具操作**:
- 使用[项目开发工具]实现规范定义的功能
- 遵循[项目编码标准]确保代码质量
- 实施[项目安全措施]防止安全漏洞
- 记录[项目执行日志]供后续验证

**执行约束**:
- 仅修改批准范围内的代码
- 保持向后兼容性 ([项目兼容性要求])
- 遵循[项目架构约束]
- 实施[项目错误处理]机制

### State D: [项目三级验证] (Verification Loop) 工具标准
**[验证即循环 §136]** - 验证是循环过程，非一次性检查  
**[项目名称]工具操作**:
- **Tier 1**: [项目结构验证] - 验证文件系统和文档一致性
- **Tier 2**: [项目接口验证] - 验证代码实现和接口定义一致性
- **Tier 3**: [项目行为验证] - 验证运行时行为和业务规范一致性
- **[项目扩展验证]**: [描述项目特定验证层级]

**验证工具**:
- Tier 1: `[项目结构验证脚本]`
- Tier 2: `[项目接口验证脚本]`
- Tier 3: `[项目测试框架]`
- 扩展: `[项目特定验证工具]`

### State E: [项目收敛纠错] (Convergence) 工具标准
**收敛原则**: 任何验证失败必须修正，全部通过才能完成  
**[项目名称]工具操作**:
- 验证失败 → 分析[项目根本原因] → 修正代码或文档
- 验证通过 → 记录[项目成果] → 更新宪法文档
- 完成状态 → 清理[项目临时资源] → 准备下一周期

**收敛指标**:
- 结构一致性: 100% (Tier 1)
- 接口覆盖率: >95% (Tier 2)
- 测试通过率: 100% (Tier 3)
- [项目质量指标]: [描述项目特定质量要求]

### 状态转换条件工具标准
- **A→B**: [项目输入]验证通过，工作范围明确
- **B→C**: 文档批准，资源就绪，环境配置完成
- **C→D**: 代码实现完成，编译通过，基础测试通过
- **D→E**: 三级验证全部通过，质量指标达标
- **E→A**: 任务完成，状态重置，准备下一工作项

### §322

**检索优化**: 针对[项目类型]项目的检索模式进行优化，支持自然语言查询和智能匹配。

#### 1. 按编号检索工具标准
- **输入**: 条款编号 (如 "§300")
- **输出**: 对应的 WF-xxx 文件路径和状态
- **算法**: 索引查找 → `protocols/WF-{section_number}_*.md`
- **[项目名称]示例**:
  - 输入: `§300` → 输出: `WF-201_cdd_workflow.md` (CDD流程)
  - 输入: `§308` → 输出: `WF-210_安全操作流程工作流程实现.md` (安全操作)

#### 2. 按关键词检索工具标准
- **输入**: 任务描述 (如 "如何执行CDD?")
- **输出**: 相关 WF-xxx 文件列表
- **算法**: 关键词匹配 → 语义相似度计算 → 排序返回
- **[项目名称]关键词库**:
  - `[项目特性1]`: → `[对应工作流文件]`
  - `[项目特性2]`: → `[对应工作流文件]`
  - `[合规性]`: → `[合规性工作流文件]`
  - `[部署]`: → `[部署专项流程文件]`

#### 3. 检索性能优化工具标准
- **缓存策略**: [描述项目检索缓存机制]
- **索引预加载**: [描述项目索引预加载策略]
- **并行检索**: [描述项目并行检索实现]
- **结果排序**: 基于[项目优先级算法]排序结果

### §323

**监控体系**: [项目性能监控系统]  
**告警机制**: [项目性能告警规则]  
**优化目标**: 持续提升工作流执行效率和资源利用率

| 指标 | CDD通用目标 | [项目名称]目标 | 监控工具 | 告警阈值 |
|------|-------------|----------------|----------|----------|
| **检索时间** | <100ms (索引查找) | [项目检索性能目标] | `[项目检索监控]` | [项目告警阈值] |
| **加载时间** | <50ms (文件读取) | [项目文件加载目标] | `[项目加载监控]` | [项目告警阈值] |
| **内存占用** | <8K tokens (内核常驻) | [项目内存使用限制] | `[项目内存监控]` | [项目告警阈值] |
| **工作流执行时间** | - | [项目工作流执行目标] | `[项目执行监控]` | [项目告警阈值] |
| **[项目特性1]性能** | - | [描述特性1性能目标] | `[项目特性1监控]` | [项目告警阈值] |
| **[项目特性2]性能** | - | [描述特性2性能目标] | `[项目特性2监控]` | [项目告警阈值] |

### §324

**速查优化**: 基于[项目类型]项目的常见工作场景，提供快速入口和决策树。

| 场景 | CDD标准入口 | [项目名称]入口 | 使用频率 | 关键操作 |
|------|-------------|----------------|----------|----------|
| 新功能开发 | §300
| 知识存储 | §300
| 安全审计 | §308
| MCP运维 | §304-223 | [项目运维入口] | 🟡 中 | [描述项目运维操作] |
| [项目场景1] | - | [项目特定入口1] | [频率] | [描述场景1关键操作] |
| [项目场景2] | - | [项目特定入口2] | [频率] | [描述场景2关键操作] |

### §325-§329
**§325-§327**: 预留专项操作流程工具标准  
**§328-§329**: 预留版本同步工具标准

---

## 🔧 第四章：预留工具法扩展（§330-§399）

### §330-§349
**§330-§339**: 预留新AI工具集成标准
**§340-§349**: 预留AI协同工具标准

### §350-§359
> **宪法地位**: 项目宪法原则
> **核心要点**: 控制论工具（如Colyseus、Qdrant等）必须深度集成到宪法体系，遵循观测回路冗余、控制回路降级、记忆回路分阶段实施原则。作为§148§267-§269§350-§359
> **[项目名称]实施**: [描述项目控制论工具集成策略，如Colyseus实时通信、Qdrant向量存储、观测回路监控工具等]
> **宪法依据**: §148§267-§269§269§301
> **实施要求**:
> 1. **观测回路冗余**: 关键观测数据必须有冗余备份和验证机制，支持§101§263-§266
> 2. **控制回路降级**: 控制系统必须有优雅降级策略，确保基本功能可用，支持§201-§204
> 3. **记忆回路分阶段**: 记忆系统采用分阶段实施策略，优先确保核心记忆完整性，支持§151
> 4. **宪法合规验证**: 所有控制论工具使用必须通过§269
> 5. **工具驱动集成**: 必须遵循§301
> **详细实施**: 参见技术文档`[项目技术文档路径]`、`knowledge_graph.md`控制论架构集成章节和`basic_law_index.md`控制论架构合规审计要求

### §360-§399
**§360-§369**: 预留容器化工具标准
**§370-§379**: 预留自动化工具标准
**§380-§389**: 预留测试工具标准
**§390-§399**: 预留监控工具标准

---

## 🏛️ 法律编号体系架构

### 工具法在三层法律体系中的位置
**T0 宪法核心层** (§100-§399):
- **基本法** (§100-§199): 宪法核心公理，`basic_law_index.md`
- **操作法** (§200-§299): 操作法和流程规范，`operational_law_index.md`
- **工具法** (§300-§399): **工具使用宪法，本文件**

**T1 公理标准层** (§400-§699):
- **行为公理** (§400-§499): 行为模式和交互规则，`behavior_patterns.md`
- **系统公理** (§500-§599): 系统模式和长时间任务，`system_patterns.md`
- **资源公理** (§600-§699): 资源管理公理，`context_patterns.md`

**T2 协议执行层** (无编号):
- **工作流协议**: WF-*文件，如`WF-201_cdd_workflow.md`
- **文档标准**: DS-*文件，如`DS-050_feature_specification.md`
- **工具标准**: 工具使用工作流和配置模板

---

## 🚀 使用指南

### 快速查找
1. **需要工具宪法原则** → 查看本文件§301-§309
2. **需要AI工具原则** → 查看本文件§310-§319
3. **需要CDD工作流工具标准** → 查看本文件§320-§329
4. **需要详细工具配置** → 查看T1公理层相关工具公理(§400-§699)
5. **需要具体工具工作流** → 查看T2协议执行层文件

### 引用示例
- 引用工具驱动原则: §301
- 引用跨平台兼容性: §304
- 引用CDD工作流: §321
- 引用详细实施: `behavior_patterns.md`相关工具驱动公理实施

### 维护更新
1. **工具原则变更** → 更新本文件相关条文
2. **CDD工作流变更** → 更新本文件§320-§329
3. **工具实施变更** → 更新T1公理层文件
4. **工具工作流变更** → 更新T2协议执行层文件
5. **工具指南变更** → 更新相关文档目录

---

## 📝 变更记录

- **2026-02-20 v6.0.0**: CDD技能模板适配版（与OpenDoge系统同步）
  - **模板适配**: 基于OpenDoge工具法v6.0.0适配为CDD技能模板
  - **CDD工作流集成**: 整合原程序法索引中的CDD工作流描述到§320-§329
  - **变量替换**: 使用 [项目名称] 等模板变量替换具体项目引用
  - **宪法对齐**: 与OpenDoge法律体系保持结构一致性
  - **版本统一**: 采用v6.0.0版本，标注为CDD技能模板版本

- **2026-02-19 v5.6.0 (OpenDoge源版本)**: 控制论工具集成版
  - **集成内容**: 新增§350-§359
  - **控制论原则**: 控制论工具必须深度集成到宪法体系
  - **宪法引用**: 集成§267-§269§301

**文件状态**: [🟢 活跃 | 🟡 维护中 | 🔴 重构中]  
**宪法层级**: T0 宪法核心层 (工具法部分)  
**加载策略**: 按需加载，工具使用时引用  
**下次审查**: [YYYY-MM-DD]

*工具是宪法意志的延伸，约束是安全使用的保障。*