# CDD Configuration v1.8.0
# Ecosystem & Automation

project:
  name: "{{PROJECT_NAME}}"
  version: "0.1.0"
  entropy_threshold: 0.3

# å¤–éƒ¨å®¡è®¡é…ç½® (Gate 4 Semantic Audit)
external_auditor:
  enabled: true
  provider: "deepseek-reasoner"
  max_tokens: 8192
  api:
    base_url: "https://api.deepseek.com"
    api_key: "${DEEPSEEK_API_KEY}"
    timeout: 60
  trigger_policy:
    on_state_change: ["State E"]
    on_file_change: ["memory_bank/t0_core/active_context.md"]
  reporting:
    format: "markdown"
    output_dir: "research_report"
  judicial_parameters:
    temperature: 0.0      # ç»å¯¹ç†æ€§ï¼Œé›¶åˆ›é€ æ€§
    max_tokens: 4096      # ç»™è¶³æ¨ç†ç©ºé—´
    strict_mode: true     # å¯ç”¨ä¸¥æ ¼è¿å®ªå®¡æŸ¥æ¨¡å¼

# Spec-Kit é›†æˆé…ç½® (v1.8.0 Updated)
spec_kit:
  templates:
    spec: "templates/t2_standards/DS-050_feature_specification.md"
    plan: "templates/t2_standards/DS-051_implementation_plan.md"
    tasks: "templates/t2_standards/DS-052_atomic_tasks.md"
    quality_checklist: "templates/t2_standards/DS-053_quality_checklist.md"
    environment_hardening: "templates/t2_standards/DS-054_environment_hardening.md"
  output:
    specs_dir: "specs"
    plans_dir: "plans"
    checklists_dir: "memory_bank/checklists"

# è´¨é‡é—¨ç¦é…ç½® (v1.8.0æ›´æ–°)
quality_gates:
  analyze:
    enabled: true
    mandatory: true
    trigger: "after DS-052 generation"
    output: "memory_bank/t2_protocols/analysis_report.md"
  checklist:
    enabled: true
    mandatory: false
    trigger: "after Analyze pass"
    output_dir: "memory_bank/t2_standards/checklists"
  environment_hardening:
    enabled: true
    mandatory: true
    trigger: "before State C execution"
    skip_patterns:
      - "*.docs"
      - "*.refactor"

# GitHub ç”Ÿæ€é›†æˆ (v1.8.0æ›´æ–°)
github_integration:
  enabled: true
  protocol: "memory_bank/t2_protocols/WF-sync-issues.md"
  sync_on_state_b: true        # State Bå®Œæˆåè‡ªåŠ¨åŒæ­¥
  sync_on_demand: true         # æ”¯æŒæ‰‹åŠ¨è§¦å‘
  default_labels:
    - "cdd-task"
    - "automated"
  behavior: "create_and_link"  # create | link_only
  task_prefix: "T"            # ä»»åŠ¡IDå‰ç¼€

# æ²»ç†é…ç½® (v1.8.0æ›´æ–°)
governance:
  amendment_protocol: "memory_bank/t2_protocols/WF-amend.md"
  versioning_scheme: "semver"
  protected_paths:
    - "memory_bank/t0_core/*"
    - "memory_bank/t1_axioms/*"
  require_impact_report: true

# ä¸Šä¸‹æ–‡ç®¡ç† (DS-007)
context_strategy:
  max_tokens: 8000
  safety_margin: 0.1
  modes:
    planning:
      include: ["memory_bank/t1_axioms/system_patterns.md", "memory_bank/t1_axioms/tech_context.md"]
      budget_ratio: 0.5
    coding:
      include: ["memory_bank/t2_standards/DS-050_feature_specification.md", "memory_bank/t2_standards/DS-051_implementation_plan.md", "memory_bank/t2_standards/DS-052_atomic_tasks.md"]
      budget_ratio: 0.7
    verifying:
      include: ["memory_bank/t1_axioms/behavior_context.md"]
      budget_ratio: 0.6

# è·¯å¾„é…ç½® (v1.8.0)
paths:
  memory_bank:
    t0_core: "memory_bank/t0_core"
    t1_axioms: "memory_bank/t1_axioms"
    t2_protocols: "memory_bank/t2_protocols"
    t2_standards: "memory_bank/t2_standards"
    t3_documentation: "memory_bank/t3_documentation"
  templates:
    t0_core: "templates/t0_core"
    t1_axioms: "templates/t1_axioms"
    t2_protocols: "templates/t2_protocols"
    t2_standards: "templates/t2_standards"
    t3_documentation: "templates/t3_documentation"

# ============================================
# v1.6.0: å·¥å…·é›†æ‰©å±• (Toolkit Expansion)
# ============================================

# å·¥å…·é›†é…ç½® (v1.8.0æ›´æ–°)
toolkit:
  code_review:
    enabled: true
    template: "memory_bank/t2_standards/DS-060_code_review.md"
    protocol: "memory_bank/t2_protocols/WF-review.md"
    auto_trigger:
      on_git_push: false
      on_pr_open: true
    severity_levels:
      critical: "ğŸ”´ ç«‹å³ä¿®å¤"
      major: "ğŸŸ  åˆå¹¶å‰ä¿®å¤"
      minor: "ğŸŸ¡ å»ºè®®ä¿®å¤"
    checklist:
      - security: "SQLæ³¨å…¥ã€XSSã€ç¡¬ç¼–ç Secrets"
      - architecture: "åˆ†å±‚ç»“æ„ã€ä¾èµ–ç®¡ç†"
      - robustness: "è¾¹ç¼˜æƒ…å†µã€é”™è¯¯å¤„ç†"
      - compliance: "CDDå·¥ä½œæµã€T0/T1/T2è§„èŒƒ"